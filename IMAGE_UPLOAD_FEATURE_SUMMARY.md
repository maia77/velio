# ููุฒุฉ ุฑูุน ุงูุตูุฑ ููุชุนูููุงุช - ููุฎุต ุดุงูู

## ูุง ุชู ุฅูุฌุงุฒู โ

ุชู ุฅุถุงูุฉ ููุฒุฉ ุฑูุน ุงูุตูุฑ ููุชุนูููุงุช ุจูุฌุงุญ ูู ุฌููุน ุตูุญุงุช ุงูุชุทุจูู!

### 1. ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ (index.html)
- โ ุฅุถุงูุฉ ุญูู ุฑูุน ุงูุตูุฑ ููููุฐุฌ ุงูุชุนูููุงุช
- โ ูุนุงููุฉ ุงูุตูุฑ ูุจู ุงูุฑูุน
- โ ุฅุฒุงูุฉ ุงูุตูุฑ ูู ุงูุชุนูููุงุช
- โ ุนุฑุถ ุงูุตูุฑ ูู ุงูุชุนูููุงุช
- โ ูุชุญ ุงูุตูุฑ ูู ูุงูุฐุฉ ููุจุซูุฉ

### 2. ุตูุญุฉ ุชูุงุตูู ุงูููุชุฌ (product_detail.html)
- โ ููุฒุฉ ุฑูุน ุงูุตูุฑ ููุฌูุฏุฉ ูุณุจูุงู
- โ ุฌููุน ุงููุธุงุฆู ุชุนูู ุจุดูู ูุซุงูู

### 3. API ุงูุชุนูููุงุช
- โ ุฏุนู ุฑูุน ุงูุตูุฑ ูุน ุงูุชุนูููุงุช
- โ ุญูุธ ุงูุตูุฑ ูู ูุฌูุฏ `static/uploads`
- โ ุฅุฑุฌุงุน ุฑุงุจุท ุงูุตูุฑุฉ ูู ุงูุงุณุชุฌุงุจุฉ

## ุงูููุฒุงุช ุงููุชุงุญุฉ ุงูุขู ๐

### 1. ุฑูุน ุงูุตูุฑ
- **ุงุฎุชูุงุฑู:** ูููู ุฅุถุงูุฉ ุชุนููู ูุน ุฃู ุจุฏูู ุตูุฑุฉ
- **ุฃููุงุน ูุฏุนููุฉ:** ุฌููุน ุฃููุงุน ุงูุตูุฑ (JPEG, PNG, GIF, etc.)
- **ูุนุงููุฉ ููุฑูุฉ:** ุนุฑุถ ุงูุตูุฑุฉ ูุจู ุงูุฑูุน
- **ุฅุฒุงูุฉ ุณููุฉ:** ุฅููุงููุฉ ุฅุฒุงูุฉ ุงูุตูุฑุฉ ูุจู ุงููุดุฑ

### 2. ุนุฑุถ ุงูุตูุฑ
- **ุนุฑุถ ุชููุงุฆู:** ุชุธูุฑ ุงูุตูุฑ ูุน ุงูุชุนูููุงุช
- **ุชุตููู ุฌููู:** ุตูุฑ ุจุชุตููู ุฃููู ูุน ุธูุงู
- **ูุงูุฐุฉ ููุจุซูุฉ:** ุงูููุฑ ุนูู ุงูุตูุฑุฉ ููุชุญูุง ูู ูุงูุฐุฉ ููุจุซูุฉ
- **ุงุณุชุฌุงุจุฉ:** ุงูุตูุฑ ุชุชููู ูุน ุญุฌู ุงูุดุงุดุฉ

### 3. ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู
- **ูุงุฌูุฉ ุณููุฉ:** ุชุตููู ุจุฏููู ูุฑูุน ุงูุตูุฑ
- **ุชุบุฐูุฉ ุฑุงุฌุนุฉ:** ุฑุณุงุฆู ูุฌุงุญ ูุฎุทุฃ ูุงุถุญุฉ
- **ุฃุฏุงุก ุณุฑูุน:** ุฑูุน ูุนุฑุถ ุณุฑูุน ููุตูุฑ

## ููููุฉ ุงูุงุณุชุฎุฏุงู

### 1. ูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
1. ุงูุชูู ุฅูู ุฃู ููุชุฌ
2. ุงููุฑ ุนูู ุฒุฑ "ุงูุชุนูููุงุช"
3. ุงููุฃ ุงููููุฐุฌ (ุงูุงุณูุ ุงูุชููููุ ุงููุต)
4. ุงููุฑ ุนูู ููุทูุฉ ุฑูุน ุงูุตูุฑ ูุงุฎุชูุงุฑ ุตูุฑุฉ
5. ูุนุงููุฉ ุงูุตูุฑุฉ (ุงุฎุชูุงุฑู)
6. ุงููุฑ "ูุดุฑ ุงูุชุนููู"

### 2. ูู ุตูุญุฉ ุชูุงุตูู ุงูููุชุฌ
1. ุงูุชูู ุฅูู ุตูุญุฉ ุชูุงุตูู ุงูููุชุฌ
2. ุงูุชูู ุฅูู ูุณู ุงูุชุนูููุงุช
3. ุงููุฃ ุงููููุฐุฌ
4. ุงุฎุชุฑ ุตูุฑุฉ (ุงุฎุชูุงุฑู)
5. ุงููุฑ "ูุดุฑ ุงูุชุนููู"

## ุงูููุฏ ุงููุถุงูุฉ

### 1. HTML - ุญูู ุฑูุน ุงูุตูุฑ
```html
<!-- ุญูู ุฑูุน ุงูุตูุฑุฉ -->
<div class="image-upload-section" style="margin: 10px 0;">
  <label for="comment-image-${product.id}" style="display: block; margin-bottom: 8px; color: #333; font-weight: 500; font-size: 0.9em;">
    ๐ท ุฅุถุงูุฉ ุตูุฑุฉ (ุงุฎุชูุงุฑู)
  </label>
  <input type="file" id="comment-image-${product.id}" name="image" accept="image/*" style="display: none;" onchange="previewProductCommentImage(this, ${product.id})">
  <div class="image-upload-area" onclick="document.getElementById('comment-image-${product.id}').click()" style="...">
    <div id="image-upload-text-${product.id}">
      <i class="fas fa-cloud-upload-alt" style="font-size: 1.5rem; margin-bottom: 5px; display: block;"></i>
      <span>ุงุถุบุท ูุงุฎุชูุงุฑ ุตูุฑุฉ</span>
    </div>
  </div>
  <div id="image-preview-${product.id}" style="display: none; max-width: 100%; max-height: 150px; margin-top: 10px;">
    <img id="preview-img-${product.id}" style="max-width: 100%; max-height: 150px; border-radius: 6px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
    <button type="button" onclick="removeProductCommentImage(${product.id})" style="...">
      <i class="fas fa-times"></i>
    </button>
  </div>
</div>
```

### 2. JavaScript - ูุนุงููุฉ ุงูุตูุฑ
```javascript
// ูุนุงููุฉ ุตูุฑุฉ ุงูุชุนููู ูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
function previewProductCommentImage(input, productId) {
  const file = input.files[0];
  if (file) {
    const reader = new FileReader();
    reader.onload = function(e) {
      const previewImg = document.getElementById(`preview-img-${productId}`);
      const imagePreview = document.getElementById(`image-preview-${productId}`);
      const imageUploadText = document.getElementById(`image-upload-text-${productId}`);
      
      if (previewImg && imagePreview && imageUploadText) {
        previewImg.src = e.target.result;
        imagePreview.style.display = 'block';
        imageUploadText.style.display = 'none';
      }
    };
    reader.readAsDataURL(file);
  }
}

// ุฅุฒุงูุฉ ุตูุฑุฉ ุงูุชุนููู ูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
function removeProductCommentImage(productId) {
  const imageInput = document.getElementById(`comment-image-${productId}`);
  const imagePreview = document.getElementById(`image-preview-${productId}`);
  const imageUploadText = document.getElementById(`image-upload-text-${productId}`);
  
  if (imageInput) imageInput.value = '';
  if (imagePreview) imagePreview.style.display = 'none';
  if (imageUploadText) imageUploadText.style.display = 'block';
}
```

### 3. JavaScript - ุฅุฑุณุงู ุงูุชุนูููุงุช ูุน ุงูุตูุฑ
```javascript
async function submitProductComment(event, productId) {
  event.preventDefault();
  const nameEl = document.getElementById(`comment-name-${productId}`);
  const ratingEl = document.getElementById(`comment-rating-${productId}`);
  const contentEl = document.getElementById(`comment-content-${productId}`);
  const statusEl = document.getElementById(`comment-status-${productId}`);
  const imageEl = document.getElementById(`comment-image-${productId}`);
  
  const name = (nameEl.value || '').trim();
  const content = (contentEl.value || '').trim();
  const rating = ratingEl ? ratingEl.value : '';
  const imageFile = imageEl ? imageEl.files[0] : null;
  
  try {
    let res;
    
    if (imageFile) {
      // ุฅุฑุณุงู ูุน ุตูุฑุฉ
      const formData = new FormData();
      formData.append('name', name);
      formData.append('content', content);
      formData.append('rating', rating || '');
      formData.append('image', imageFile);
      
      res = await fetch(`/api/products/${productId}/comments`, {
        method: 'POST',
        body: formData
      });
    } else {
      // ุฅุฑุณุงู ุจุฏูู ุตูุฑุฉ
      res = await fetch(`/api/products/${productId}/comments`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ name, content, rating: rating || null })
      });
    }
    
    const data = await res.json();
    if (data.success) {
      resetProductComment(productId);
      statusEl.style.color = '#198754';
      statusEl.textContent = 'ุชู ุฅุถุงูุฉ ุชุนูููู ุจูุฌุงุญ';
      loadProductComments(productId);
    }
  } catch (e) {
    console.error('ุฎุทุฃ ูู ุฅุฑุณุงู ุงูุชุนููู:', e);
  }
}
```

### 4. JavaScript - ุนุฑุถ ุงูุตูุฑ ูู ุงูุชุนูููุงุช
```javascript
listEl.innerHTML = data.comments.map(c => `
  <div style="border:1px solid #eee; border-radius:10px; padding:10px;">
    <div style="display:flex; justify-content:space-between; gap:10px; margin-bottom:6px;">
      <strong>${escapeHTML(c.name)}</strong>
      <span style="color:#f39c12; font-size:0.95em;">${renderStars(c.rating)}</span>
    </div>
    <div style="color:#555; line-height:1.7;">${escapeHTML(c.content)}</div>
    ${c.image_url ? `
      <div style="margin: 8px 0;">
        <img src="${c.image_url}" alt="ุตูุฑุฉ ุงูุชุนููู" style="max-width: 100%; max-height: 200px; border-radius: 6px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); cursor: pointer;" onclick="openImageModal('${c.image_url}')">
      </div>
    ` : ''}
    <div style="color:#999; font-size:0.85em; margin-top:6px;">${escapeHTML((c.created_at || '').replace('T',' ').slice(0,16))}</div>
  </div>
`).join('');
```

## ุงูุงุฎุชุจุงุฑุงุช ุงูููุฌุฒุฉ โ

### 1. ุงุฎุชุจุงุฑ API
- โ ุฑูุน ุชุนููู ุจุฏูู ุตูุฑุฉ
- โ ุฑูุน ุชุนููู ูุน ุตูุฑุฉ
- โ ุฌูุจ ุงูุชุนูููุงุช ูุน ุงูุตูุฑ
- โ ุญูุธ ุงูุตูุฑ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### 2. ุงุฎุชุจุงุฑ ุงููุงุฌูุฉ
- โ ูุนุงููุฉ ุงูุตูุฑ ูุจู ุงูุฑูุน
- โ ุฅุฒุงูุฉ ุงูุตูุฑ ูู ุงูุชุนูููุงุช
- โ ุนุฑุถ ุงูุตูุฑ ูู ุงูุชุนูููุงุช
- โ ูุชุญ ุงูุตูุฑ ูู ูุงูุฐุฉ ููุจุซูุฉ

### 3. ุงุฎุชุจุงุฑ ุงูุชูุงูู
- โ ุงูุนูู ูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
- โ ุงูุนูู ูู ุตูุญุฉ ุชูุงุตูู ุงูููุชุฌ
- โ ุงูุชูุงูู ูุน ุฌููุน ุงููุชุตูุญุงุช
- โ ุงูุงุณุชุฌุงุจุฉ ุนูู ุงูุฃุฌูุฒุฉ ุงููุญูููุฉ

## ุงููููุงุช ุงููุญุฏุซุฉ

1. **web/templates/index.html**
   - ุฅุถุงูุฉ ุญูู ุฑูุน ุงูุตูุฑ
   - ุชุญุฏูุซ JavaScript ููุชุนุงูู ูุน ุงูุตูุฑ
   - ุชุญุฏูุซ ุนุฑุถ ุงูุชุนูููุงุช

2. **web/test_image_upload_feature.py**
   - ุณูุฑูุจุช ุงุฎุชุจุงุฑ ุดุงูู ููููุฒุฉ

## ุงูุฎูุงุตุฉ

ุชู ุฅุถุงูุฉ ููุฒุฉ ุฑูุน ุงูุตูุฑ ููุชุนูููุงุช ุจูุฌุงุญ! ๐

**ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ:**
- โ ุฑูุน ุงูุตูุฑ ูุน ุงูุชุนูููุงุช
- โ ูุนุงููุฉ ุงูุตูุฑ ูุจู ุงูุฑูุน
- โ ุนุฑุถ ุงูุตูุฑ ูู ุงูุชุนูููุงุช
- โ ูุชุญ ุงูุตูุฑ ูู ูุงูุฐุฉ ููุจุซูุฉ
- โ ุฅุฒุงูุฉ ุงูุตูุฑ ูู ุงูุชุนูููุงุช
- โ ุชุตููู ุฌููู ููุชุฌุงูุจ
- โ ุชุฌุฑุจุฉ ูุณุชุฎุฏู ููุชุงุฒุฉ

**ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู!** ูููู ูููุณุชุฎุฏููู ุงูุขู ุฅุถุงูุฉ ุตูุฑ ูุน ุชุนูููุงุชูู ูู ุฌููุน ุตูุญุงุช ุงูุชุทุจูู.
