#!/bin/bash

echo "๐ ุจุฏุก ุชุดุบูู ุงูุชุทุจูู ุงููุงูู ูุน ุฌููุน ุงูููุฒุงุช..."

# ุฅููุงู ุฃู ุชุทุจููุงุช ุฃุฎุฑู
pkill -f "python3 app.py" 2>/dev/null
pkill -f "python3 admin_app_fixed.py" 2>/dev/null
sleep 2

# ุงูุญุตูู ุนูู ุนููุงู IP
IP_ADDRESS=$(ifconfig | grep "inet " | grep -v 127.0.0.1 | head -1 | awk '{print $2}')

echo "๐ ุนููุงู IP ุงูููุจููุชุฑ: $IP_ADDRESS"
echo ""
echo "๐ ุงูุฑูุงุจุท ุงููุชุงุญุฉ:"
echo "   ๐ฑ ุงูุชุทุจูู ุงูุฑุฆูุณู (ุงููุงุชู): http://$IP_ADDRESS:5003"
echo "   ๐ฑ ุฅุฏุงุฑุฉ ุงูููุชุฌุงุช (ุงููุงุชู): http://$IP_ADDRESS:5007"
echo "   ๐ป ุงูุชุทุจูู ุงูุฑุฆูุณู (ุงูููุจููุชุฑ): http://127.0.0.1:5003"
echo "   ๐ป ุฅุฏุงุฑุฉ ุงูููุชุฌุงุช (ุงูููุจููุชุฑ): http://127.0.0.1:5007"
echo ""

echo "โ ุงูููุฒุงุช ุงููุชุงุญุฉ:"
echo "   - ุนุฑุถ ุงูููุชุฌุงุช"
echo "   - ุฅุถุงูุฉ ููุชุฌุงุช ุฌุฏูุฏุฉ"
echo "   - ุชุนุฏูู ุงูููุชุฌุงุช (ูุญุฏุซ)"
echo "   - ุญุฐู ุงูููุชุฌุงุช"
echo "   - ูุตูู ูู ุงููุงุชู"
echo ""

# ุชุดุบูู ุงูุชุทุจูู ุงูุฑุฆูุณู
echo "๐ ุชุดุบูู ุงูุชุทุจูู ุงูุฑุฆูุณู..."
python3 app.py &
APP_PID=$!

# ุงูุชุธุงุฑ ูููู
sleep 3

# ุชุดุบูู ุชุทุจูู ุงูุฅุฏุงุฑุฉ
echo "๐ ุชุดุบูู ุชุทุจูู ุงูุฅุฏุงุฑุฉ..."
python3 admin_app_fixed.py &
ADMIN_PID=$!

echo ""
echo "โ ุชู ุชุดุบูู ุงูุชุทุจููุงุช ุจูุฌุงุญ!"
echo ""
echo "๐ฑ ูููุตูู ูู ุงููุงุชู:"
echo "   - ุงููููุน ุงูุฑุฆูุณู: http://$IP_ADDRESS:5003"
echo "   - ุฅุฏุงุฑุฉ ุงูููุชุฌุงุช: http://$IP_ADDRESS:5007"
echo ""
echo "๐ป ูููุตูู ูู ุงูููุจููุชุฑ:"
echo "   - ุงููููุน ุงูุฑุฆูุณู: http://127.0.0.1:5003"
echo "   - ุฅุฏุงุฑุฉ ุงูููุชุฌุงุช: http://127.0.0.1:5007"
echo ""
echo "โ๏ธ ููุฒุฉ ุงูุชุนุฏูู ูุชุงุญุฉ ุงูุขู!"
echo "   - ุงุถุบุท ุนูู ุฒุฑ 'ุชุนุฏูู' ุจุฌุงูุจ ุฃู ููุชุฌ"
echo "   - ุนุฏู ุงูุจูุงูุงุช ุงููุทููุจุฉ"
echo "   - ุงุถุบุท 'ุชุญุฏูุซ ุงูููุชุฌ'"
echo ""
echo "โน๏ธ  ูุฅููุงู ุงูุชุทุจููุงุชุ ุงุถุบุท Ctrl+C ุฃู ุงุณุชุฎุฏู:"
echo "   pkill -f 'python3 app.py' && pkill -f 'python3 admin_app_fixed.py'"

# ุงูุชุธุงุฑ ุฅุดุงุฑุฉ ุงูุฅููุงู
wait 