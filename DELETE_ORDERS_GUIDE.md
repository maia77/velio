# دليل حذف الطلبات - Velio Store

## نظرة عامة
تم إضافة ميزة حذف جميع الطلبات من إدارة الطلبات. يمكن حذف الطلبات بطريقتين:

## الطريقة الأولى: السكريبت المباشر

### تشغيل السكريبت
```bash
python3 delete_all_orders.py
```

### مميزات السكريبت
- ✅ يدعم SQLite و PostgreSQL
- ✅ يكتشف قاعدة البيانات تلقائياً
- ✅ يطلب تأكيد قبل الحذف
- ✅ يعرض عدد الطلبات المحذوفة
- ✅ يحذف تاريخ حالة الطلبات أيضاً

### مثال على الاستخدام
```bash
$ python3 delete_all_orders.py
🗑️ سكريبت حذف جميع الطلبات
==================================================
📊 نوع قاعدة البيانات: sqlite
📁 مسار قاعدة البيانات: shared_instance/products.db
✅ تم الاتصال بقاعدة البيانات SQLite: shared_instance/products.db
📋 عدد الطلبات الحالي: 4

⚠️ تحذير: سيتم حذف جميع الطلبات نهائياً!
هل أنت متأكد؟ اكتب 'نعم' للمتابعة: نعم
🗑️ بدء حذف الطلبات...
✅ تم حذف تاريخ حالة الطلبات
✅ تم حذف جميع الطلبات بنجاح!
🎉 تم حذف 4 طلب بنجاح!
📋 عدد الطلبات المتبقي: 0
🔌 تم إغلاق الاتصال بقاعدة البيانات
```

## الطريقة الثانية: واجهة الإدارة

### في التطبيق الرئيسي
1. اذهب إلى `/admin/orders`
2. اضغط على زر "حذف جميع الطلبات" (أحمر)
3. أكد الحذف مرتين
4. سيتم حذف جميع الطلبات وإعادة تحميل الصفحة

### في تطبيق الإدارة المنفصل
1. اذهب إلى `http://localhost:5007/admin/orders`
2. اضغط على زر "حذف جميع الطلبات" (أحمر)
3. أكد الحذف مرتين
4. سيتم حذف جميع الطلبات وإعادة تحميل الصفحة

## الأمان والحماية

### تأكيد مزدوج
- يتم طلب تأكيد مرتين قبل الحذف
- لا يمكن التراجع عن الحذف
- يتم عرض تحذير واضح

### حذف شامل
- يتم حذف جدول `orders`
- يتم حذف جدول `order_status_history`
- لا يؤثر على المنتجات أو التعليقات

## API Endpoint

### حذف جميع الطلبات
```
DELETE /api/admin/orders/delete-all
```

**الاستجابة:**
```json
{
    "success": true,
    "message": "تم حذف 4 طلب بنجاح",
    "deleted_count": 4
}
```

## ملاحظات مهمة

⚠️ **تحذير**: هذا الإجراء لا يمكن التراجع عنه!

✅ **آمن**: لا يؤثر على المنتجات أو التعليقات

🔄 **تلقائي**: يكتشف قاعدة البيانات المستخدمة

📊 **مفصل**: يعرض عدد الطلبات المحذوفة

## استكشاف الأخطاء

### خطأ: "no such table: orders"
- تأكد من وجود جدول الطلبات في قاعدة البيانات
- تحقق من مسار قاعدة البيانات الصحيح

### خطأ: "حدث خطأ في الاتصال بالخادم"
- تأكد من تشغيل الخادم
- تحقق من صلاحيات المدير

### خطأ: "حدث خطأ في حذف الطلبات"
- تحقق من صلاحيات قاعدة البيانات
- تأكد من عدم وجود قيود خارجية

## الدعم الفني

إذا واجهت أي مشاكل، تحقق من:
1. سجلات الخادم
2. صلاحيات قاعدة البيانات
3. حالة الاتصال بالخادم
