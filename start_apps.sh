#!/bin/bash

# ููู ุชุดุบูู ุงูุชุทุจูููู ูุน ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงููุดุชุฑูุฉ

echo "๐ ุจุฏุก ุชุดุบูู ุงูุชุทุจูููู ูุน ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงููุดุชุฑูุฉ"
echo "============================================================"

# ุงูุชุญูู ูู ูุฌูุฏ Python
if ! command -v python3 &> /dev/null; then
    echo "โ Python3 ุบูุฑ ูุซุจุช. ูุฑุฌู ุชุซุจูุช Python3 ุฃููุงู"
    exit 1
fi

# ุงูุชุญูู ูู ูุฌูุฏ pip
if ! command -v pip3 &> /dev/null; then
    echo "โ pip3 ุบูุฑ ูุซุจุช. ูุฑุฌู ุชุซุจูุช pip3 ุฃููุงู"
    exit 1
fi

echo "โ ุชู ุงูุชุญูู ูู Python3 ู pip3"

# ุชุซุจูุช ุงููุชุทูุจุงุช
echo "๐ฆ ุชุซุจูุช ุงููุชุทูุจุงุช..."
pip3 install -r requirements.txt

# ุงุฎุชุจุงุฑ ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช
echo "๐ ุงุฎุชุจุงุฑ ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช..."
python3 shared_database_config_fallback.py

# ุงูุชุญูู ูู ูุฌุงุญ ุงูุงุชุตุงู
if [ $? -ne 0 ]; then
    echo "โ ูุดู ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช. ูุฑุฌู ุงูุชุญูู ูู ุงูุงุชุตุงู ุจุงูุฅูุชุฑูุช"
    exit 1
fi

echo ""
echo "๐ ูุนูููุงุช ุงูุชุดุบูู:"
echo "   ๐ ุชุทุจูู ุงูููุจ: http://127.0.0.1:5003"
echo "   ๐ง ุชุทุจูู ุงูุฅุฏุงุฑุฉ: http://127.0.0.1:5007"
echo "   ๐พ ูุงุนุฏุฉ ุงูุจูุงูุงุช: ูุดุชุฑูุฉ ุจูู ุงูุชุทุจูููู"
echo ""

# ุชุดุบูู ุงูุชุทุจูููู
echo "๐ ุจุฏุก ุชุดุบูู ุงูุชุทุจูููู..."
python3 run_apps.py